---
import { StickyHeader, Astronav, MenuItems, MenuIcon } from 'astro-navbar'
import { Icon } from 'astro-icon/components'
import { Container } from '@components/layout'

import { Dropdown } from '@components/layout/navigation/Navbar'
import { MegaDropdown } from '@components/layout/navigation/Navbar/mega-dropdown'

import logo from '@assets/logo.svg'
import { data } from '@constants/navigation'

const { headerTheme = 'light', headerBorder = false } = Astro.props
---

<StickyHeader
  data-theme={headerTheme}
  class="sticky top-0 z-20 transition-all"
  scrollY={50}
  defaultClass="py-5 bg-color-surface"
  activeClass="py-2 bg-color-surface/80 backdrop-blur-lg"
  transition:persist
>
  <Container>
    <div class="relative z-10 flex w-full flex-col items-center justify-between gap-4 lg:flex-row lg:gap-6 xl:gap-12">
      <Astronav>
        <div class="flex w-full items-center justify-between gap-2 text-nowrap lg:w-auto">
          <a
            href="/"
            class="focus-visible:shadow-outline-indigo -ml-2 flex items-center gap-2 rounded px-2 text-lg transition focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:outline-none"
          >
            <img src={logo.src} alt="Plus UI" class="h-5 w-5" />
            <span class="text-color-default text-xl font-bold">Plus UI</span>
          </a>
          <div class="block lg:hidden">
            <MenuIcon class="text-color-default h-5 w-5" />
          </div>
        </div>
        <MenuItems class="mt-2 hidden w-full items-center justify-between lg:mt-0 lg:flex lg:gap-2 xl:gap-4">
          <ul class="flex flex-col lg:flex-row lg:gap-2">
            {
              data.map((item, index) => (
                <>
                  {item.children && item.type !== 'mega' && <Dropdown title={item.title} children={item.children} lastItem={index === data.length - 1} />}

                  {item.children && item.type === 'mega' && <MegaDropdown title={item.title} type={item.megaType} children={item.children} />}

                  {!item.children && (
                    <li class="text-nowrap">
                      <a
                        href={item.path}
                        class="font-sans-tight text-color-default hover:bg-color-default-hovered focus-visible:shadow-outline-indigo flex rounded px-3 py-1.5 text-base font-medium tracking-[0.01em] transition focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:outline-none"
                      >
                        {item.title}
                      </a>
                    </li>
                  )}
                </>
              ))
            }
          </ul>
          <div class="mt-3 flex items-center gap-2 lg:mt-0 xl:gap-4">
            <div class="hidden items-center gap-2 lg:flex xl:gap-4">
              <!-- figma -->
              <a href="https://www.figma.com/@plusui" class="flex h-6 w-6 items-center justify-center" target="_blank" rel="noopener noreferrer" aria-label="Figma">
                <Icon name="logos:figma" class="h-5 w-5" />
              </a>
              <!-- github -->
              <a href="https://github.com/plus-ui" class="text-color-default flex h-6 w-6 items-center justify-center" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                <Icon name="logos:github-icon" class="text-color-default h-5 w-5" />
              </a>
            </div>
          </div>
        </MenuItems>
      </Astronav>
    </div>
  </Container>
</StickyHeader>
